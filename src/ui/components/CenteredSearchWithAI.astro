<div class="nav_search-wrap">
  <div class="search-wrap--centered" id="docsearch"></div>
  <div id="custom-button" class="nav_ai-btn">
    <button 
      data-inkeep-sidebar-chat-trigger=""
      class="chat-trigger-btn"
    >
      <img src="/svg/drizzle.svg" alt="Drizzle" class="drizzle-logo" />
      Ask AI
    </button>
  </div>
</div>
<script type="module" is:inline data-astro-rerun>
  docsearch({
    container: '#docsearch',
    appId: "MXZNUT59HV",
    apiKey: "7c390e262ac8858df0b6624d01d9dfef",
    indexName: "orm-drizzle",
    placeholder: "Search documentation...",
  });

  let themeName = localStorage.getItem('theme');
  if(themeName === 'system') {
    themeName = window.matchMedia('(prefers-color-scheme: dark)').matches
      ? 'dark'
      : 'light';
  }

  const properties = {
    stylesheetUrls: ['/inkeep-styles.css'],
    chatButtonType: 'ICON_TEXT',
    isPositionFixed: false,
    baseSettings: {
      apiKey: '4f4da4a5733032ef8ff23e3b7906954877fd0ee54d58d1e0',
      integrationId: 'clpbm8p9y002ns601vbbswj5i',
      organizationId: 'clog94xy50001s601yapu7swn',
      organizationDisplayName: 'Drizzle ORM',
      primaryBrandColor: '#FFFFFF',
      theme: {
        colorMode: {
          forcedColorMode: themeName,
        },
      },
    },
    style: {visibility: 'visible'},
    modalSettings: {
      areOpenHotKeysDisabled: true,
    },
    aiChatSettings: {
      botAvatarSrcUrl: '/svg/drizzle.svg',
    }
  }
</script>
<style>
  .nav_search-wrap {
    align-items: center;
    display: flex;
    flex-grow: 1;
    gap: 12px;
    max-width: 420px;
  }

  html[class~=dark] .nav_ai-btn {
    background-color: #1c1c1c;
  }

  .nav_ai-btn {
    width: 108px;
    height: 33px;
    background-color: #F4F4F4;
    border-radius: 4px;
  }

  .chat-trigger-btn {
    width: 100%;
    height: 100%;
    background: inherit;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    font-size: 13px;
    font-weight: 500;
    color: #666;
    transition: all 0.2s ease;
  }

  html[class~=dark] .chat-trigger-btn {
    color: #ccc;
  }

  .chat-trigger-btn:hover {
    opacity: 0.8;
  }

  .drizzle-logo {
    width: 16px;
    height: 16px;
    flex-shrink: 0;
  }

  @media screen and (max-width: 768px) {
    .nav_search-wrap {
      display: none;
    }
    
  }
</style>